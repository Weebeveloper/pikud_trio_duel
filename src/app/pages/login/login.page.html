<div class="page__container">
  <div class="cover">
    <div class="cover__logo">T</div>
  </div>

  <div class="details" *ngIf="!(isLoading$ | async); else load">
    <div class="details__titles">
      <span class="details__titles__title">TrioDuel</span>
      <span class="details__titles__title">Login</span>
    </div>

    <p class="details__sentence">"When just grabbing ya wasn't enough"</p>

    <form class="details__form" [formGroup]="filters" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="fill" class="details__form__field">
        <mat-label>Email</mat-label>
        <input
          matInput
          maxlength="25"
          formControlName="name"
          placeholder="Enter your email"
        />
        <mat-error *ngIf="filters.get('name')?.hasError('required')">
          Email is required
        </mat-error>
      </mat-form-field>

      <div class="details__form__password">
        <mat-form-field appearance="fill" class="details__form__field">
          <mat-label>Password</mat-label>
          <input
            matInput
            maxlength="20"
            [type]="hidePassword ? 'password' : 'text'"
            formControlName="password"
            placeholder="Enter your password"
          />
          <mat-error *ngIf="filters.get('password')?.hasError('required')">
            Password is required
          </mat-error>
        </mat-form-field>

        <button
          mat-icon-button
          type="button"
          class="details__form__password__icon"
          (click)="togglePasswordVisibility()"
          [attr.aria-label]="'Hide or show password'"
          [attr.aria-pressed]="!hidePassword"
        >
          <mat-icon
            >{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon
          >
        </button>
      </div>

      <button mat-flat-button class="details__form__button" type="submit">
        Log in
      </button>
    </form>

    <div class="details__error__message">
      <ng-container *ngIf="errorMessage$ | async as message">
        {{ message }}
      </ng-container>
    </div>
  </div>

  <ng-template #load>
    <div class="loading">
      <mat-spinner
        diameter="100"
        strokeWidth="5"
        class="loading__spinner"
      ></mat-spinner>
    </div>
  </ng-template>
</div>
